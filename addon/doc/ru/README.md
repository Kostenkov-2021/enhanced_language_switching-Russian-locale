# Enhanced Language Detection (Улучшенное обнаружение языков)

* Автор: Emil-18
* Совместимость с NVDA: 2024.2 и более поздние версии
* Скачать: [Стабильная версия](https://github.com/Emil-18/enhanced_language_switching/releases/download/v1.2.2/enhancedLanguageDetection-1.2.2.nvda-addon).

Это дополнение автоматически определяет язык текста, который NVDA собирается произнести, и использует встроенное в NVDA автоматическое переключение языка, если оно включено, для произнесения текста на этом языке.

Это дополнение в значительной степени вдохновлено дополнением [language ident](https://github.com/slohmaier/LanguageIdent).
Однако оно  перестало работать, и, судя по его проблемам на GitHub, не похоже, что разработчик собирается их исправлять.

## Настройки

* Библиотека определения языка:
	Это комбинированный список, который позволяет изменить библиотеку, используемую дополнением для определения языка. Доступны следующие библиотеки:
	* lingua (рекомендуется)
	* Langdetect
* Определение языков:
    Это комбинированный список, который позволяет выбрать, когда дополнение будет определять язык текста. Доступны следующие варианты:
    * всегда определять:
        дополнение всегда будет определять язык текста и удалять все предыдущие инструкции по изменению языка. Например, если вы находитесь на веб-странице, и её язык определён как английский, но, по мнению дополнения, текст является норвежским, оно переключится на норвежский голос. Если вы не выбрали норвежский язык в качестве одного из определяемых языков  (см. ниже), голос не изменится вообще.
    * определять только тогда, когда текст не содержит инструкций для изменения языка:
        Дополнение будет определять язык только в том случае, если в тексте нет указаний на изменение языка. В приведённом выше примере оно переключится на английский голос.
    * никогда не определять (поведение NVDA по умолчанию):
        Самостоятельное определение.
        * Определять несколько языков в одном тексте:
	этот флажок позволяет указать, должно ли дополнение пытаться обнаружить несколько языков в одном фрагменте текста, который NVDA собирается произнести. Например, при построчном чтении документа, если встречается строка, содержащая текст на двух языках, дополнение попытается определить каждый язык отдельно.
* Определяемые языки:
    Это список языков для определения. Если дополнение определит язык текста, а язык не выбран в этом списке, автоматическое переключение языка на основе определения не произойдёт. По умолчанию языки не выбраны.

## Журнал изменений.

### Версия 1.2
* Добавлена поддержка библиотеки определения языка lingua. Эта библиотека работает значительно быстрее и точнее, чем использовавшаяся ранее langdetect. Кроме того, она всегда будет интерпретировать один и тот же текст как один и тот же язык, в отличие от langdetect. При необходимости вы по-прежнему сможете использовать langdetect, но это не рекомендуется.

### Версия 1.1
* Добавлена совместимость с NVDA 2025.
* Исправлена ошибка, из-за которой дополнение воспроизводило звук ошибки при выходе из NVDA.
* Теперь определение языка не выполняется, если у пользователя отключено автоматическое переключение языка (так как оно работает очень медленно).
* Добавлен перевод на русский язык, спасибо Kostenkov-2021
### Версия 1.0

Первоначальный выпуск